(function(){App.Entity=function(){function e(e){this.params=e,this.positionX=this.params.x||1,this.positionY=this.params.y||1,this.scale=this.params.scale||1,this.name=this.params.name,this.type=this.params.type,this.initPixi()}return e.prototype.initPixi=function(){var e;return this.sprite="/images/bunny.png",e=PIXI.Texture.fromImage(this.sprite),this.pixiEntity=new PIXI.Sprite(e),this.pixiEntity.setInteractive(this.params.interactive||!1),this.pixiEntity.anchor=new PIXI.Point(.5,.5),this.pixiEntity.position.x=this.positionX,this.pixiEntity.position.y=this.positionY,this.pixiEntity.scale.x=this.scale,this.pixiEntity.scale.y=this.scale},e.prototype.setWorld=function(e){var t,n,r,i;return this.physicWorld=e,t=new B2.BodyDef,t.position.x=this.positionX/App.scale,t.position.y=this.positionY/App.scale,t.angle=0,t.type=B2.Body.b2_dynamicBody,t.linearDamping=this.params.linearDamping||.25,t.angularDamping=this.params.angularDamping||.9,t.userData=this,n=new B2.FixtureDef,n.density=this.params.density||1,n.friction=this.params.friction||.05,n.restitution=this.params.restitution||.5,n.shape=new B2.PolygonShape,i=this.params.shapeWidth||this.pixiEntity.width/2/App.scale*this.scale,r=this.params.shapeHeight||this.pixiEntity.height/2/App.scale*this.scale,n.shape.SetAsBox(i,r),this.physicBody=this.physicWorld.CreateBody(t),this.physicBody.CreateFixture(n)},e.prototype.initEvents=function(e){return this.pixiEntity.click=e.click,this.pixiEntity.mouseover=e.mouseover,this.pixiEntity.mouseout=e.params,this.pixiEntity.mousedown=e.mousedown,this.pixiEntity.mouseup=e.mouseup,this.pixiEntity.touchstart=e.touchstart,this.pixiEntity.touchend=e.touchend,this.pixiEntity.tap=e.tap},e.prototype.sync=function(){return this.pixiEntity.rotation=this.physicBody.GetAngle(),this.positionX=this.pixiEntity.position.x=this.physicBody.GetPosition().x*App.scale,this.positionY=this.pixiEntity.position.y=this.physicBody.GetPosition().y*App.scale},e.prototype.setStage=function(e){return this.stage=e,this.stage.addChild(this.pixiEntity)},e.prototype.moveTo=function(e,t,n){return n==null&&(n=4),this.physicBody.ApplyImpulse({x:(e-this.positionX)/1e4*n,y:(t-this.positionY)/1e4*n},{x:this.physicBody.GetWorldCenter().x+10*Math.sin(this.physicBody.GetAngle()),y:this.physicBody.GetWorldCenter().y-10*Math.cos(this.physicBody.GetAngle())})},e.prototype.rotation=function(e){return this.pixiEntity.rotation+=e},e.prototype.position=function(){return{x:this.positionX,y:this.positionY}},e}()}).call(this);
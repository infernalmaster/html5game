(function(){App.Board=function(){function e(e,t){var n;this.width=e,this.height=t,this.zombieGroups={},this.canvas=document.getElementById("dynamic"),this.renderer=new PIXI.autoDetectRenderer(this.width,this.height,this.canvas),this.interactive=!0,this.stage=new PIXI.Stage(0,this.interactive),n=new B2.Vec2(0,0),this.physicWorld=new B2.World(n,!0),this.createBorder(this.width/2,0,0,this.width,10),this.createBorder(this.width/2,this.height,0,this.width,10),this.createBorder(0,this.height/2,0,10,this.height),this.createBorder(this.width,this.height/2,0,10,this.height)}return e.prototype.onPlayerHit=function(e){var t,n=this;return t=function(t,n){var r,i;r=t.GetFixtureA().GetBody().GetUserData(),i=t.GetFixtureB().GetBody().GetUserData();if(r===null||i===null)return!0;r.type==="player"&&i.type==="zombie"&&e({player:r,zombie:i});if(r.type==="zombie"&&i.type==="player")return e({zombie:r,player:i})},this.events({postSolve:t})},e.prototype.events=function(e){var t;return t=new B2.Listener,t.BeginContact=e.beginContact||function(){},t.EndContact=e.endContact||function(){},t.PostSolve=e.postSolve||function(){},t.PreSolve=e.preSolve||function(){},this.physicWorld.SetContactListener(t)},e.prototype.addPlayer=function(e){return this.player=e,this.player.setStage(this.stage),this.player.setWorld(this.physicWorld)},e.prototype.removePlayer=function(e){return this.stage.removeChild(e.pixiSprite)},e.prototype.addGroupOfZombies=function(e){return e.setParams({stage:this.stage,physicWorld:this.physicWorld}),this.zombieGroups[e.name]=e},e.prototype.removeGroupOfZombies=function(e){var t,n,r;r=this.zombieGroups[e.name].zombies;for(t in r)n=r[t],this.stage.removeChild(n.pixiEntity);return delete this.zombieGroups[e.name]},e.prototype.moveAllGroupsOfZombiesTo=function(e,t){var n,r,i,s;i=this.zombieGroups,s=[];for(r in i)n=i[r],s.push(n.moveTo(e,t));return s},e.prototype.render=function(){return this.renderer.render(this.stage)},e.prototype.createBorder=function(e,t,n,r,i){var s,o,u;return s=new B2.BodyDef,s.position.x=e/App.scale,s.position.y=t/App.scale,s.angle=n,s.type=B2.Body.b2_staticBody,s.linearDamping=.25,s.angularDamping=.9,o=new B2.FixtureDef,o.density=1,o.friction=.05,o.restitution=.95,o.shape=new B2.PolygonShape,o.shape.SetAsBox(r/2/App.scale,i/2/App.scale),u=this.physicWorld.CreateBody(s),u.CreateFixture(o)},e}()}).call(this);
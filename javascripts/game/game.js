(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};App.Game=function(){function t(t,n){this.board=t,this.player=n,this.animate=e(this.animate,this),this.onMove=e(this.onMove,this),this.addStats=e(this.addStats,this),this.board.addPlayer(this.player),this.mouse={x:0,y:0},document.getElementById("dynamic").addEventListener("mousemove",this.onMove,!1),this.initEvents(),this.addStats()}return t.prototype.initEvents=function(){return this.player.initEvents({click:function(e){return console.log("click")}}),this.board.onPlayerHit(function(){})},t.prototype.debug=function(e){var t,n;return this.debug=!0,n=document.getElementById("static").getContext("2d")||e,n.canvas.width=this.board.width,n.canvas.height=this.board.height,t=new B2.DebugDraw,t.SetSprite(n),t.SetFillAlpha(.5),t.SetLineThickness(1),t.SetDrawScale(App.scale),t.SetFlags(B2.DebugDraw.e_shapeBit|B2.DebugDraw.e_jointBit),this.board.physicWorld.SetDebugDraw(t)},t.prototype.addStats=function(){return this.stats=new Stats,this.stats.setMode(0),this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="0px",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement)},t.prototype.onMove=function(e){return e.pageX||e.pageY?(this.mouse.x=e.pageX,this.mouse.y=e.pageY):(this.mouse.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.mouse.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop)},t.prototype.animate=function(){var e,t,n,r,i;requestAnimationFrame(this.animate),this.stats.begin(),this.player.moveTo(this.mouse.x,this.mouse.y,40),this.board.moveAllGroupsOfZombiesTo(this.player.positionX,this.player.positionY),n=(new Date).getTime(),e=i?(n-i)/1e3:1/60,i=n,this.board.physicWorld.Step(e*2,10,10),r=this.board.physicWorld.GetBodyList();while(r)t=r.GetUserData(),t&&t.sync(),r=r.GetNext();return this.board.render(),this.debug&&(this.board.physicWorld.DrawDebugData(),this.board.physicWorld.ClearForces()),this.stats.end()},t}()}).call(this);